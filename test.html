<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Law Brewing: Prohibition Run - Iteration 1</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #1a1a1a; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { border: 4px solid #d4af37; }
    </style>
</head>
<body>
    <div id="game-container"></div>

    <script>
        const config = {
            type: Phaser.AUTO,
            width: 1200,
            height: 800,
            parent: 'game-container',
            backgroundColor: '#2d4c2d', // Deep Green Base
            physics: { default: 'arcade' },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let player, cursors;

        function preload() {
            const baseUrl = 'https://lawbrewing.github.io/LawBrewing/';
            
            // Load images as individual, full assets
            this.load.image('road_v', baseUrl + 'roads.jpg'); // Vertical Road
            this.load.image('truck', baseUrl + 'green.png');
            this.load.image('pub_building', baseUrl + '1000002790.jpg');
            this.load.image('factory', baseUrl + 'buildings2.jpg');
            this.load.image('grass_detail', baseUrl + 'objects.jpg');
        }

        function create() {
            // 1. PLACE THE FACTORY (Start Point)
            const factory = this.add.image(200, 200, 'factory');
            factory.setDisplaySize(300, 200);

            // 2. DRAW THE ROAD MANUALLY (Simple Straight Path)
            // We place them one by one to ensure they look like a solid road
            for (let i = 0; i < 6; i++) {
                let road = this.add.image(200 + (i * 150), 450, 'road_v');
                road.setDisplaySize(150, 150);
            }

            // 3. PLACE THE PUB (The Finish Line)
            const pub = this.add.image(1000, 450, 'pub_building');
            pub.setDisplaySize(200, 200);

            // 4. SCATTER SOME OBJECTS (Trees/Rocks from your objects file)
            const trees = this.add.image(500, 150, 'grass_detail');
            trees.setDisplaySize(150, 150);

            // 5. THE TRUCK
            player = this.physics.add.sprite(200, 450, 'truck');
            player.setDisplaySize(100, 60);
            player.setCollideWorldBounds(true);

            // 6. UI
            this.add.text(30, 30, 'LAW BREWING RUN', { 
                fontFamily: 'Georgia, serif', fontSize: '40px', fill: '#d4af37' 
            });

            cursors = this.input.keyboard.createCursorKeys();
        }

        function update() {
            player.setVelocity(0);
            const speed = 300;

            if (cursors.left.isDown) {
                player.setVelocityX(-speed);
                player.setAngle(180);
                player.setFlipY(true);
            } else if (cursors.right.isDown) {
                player.setVelocityX(speed);
                player.setAngle(0);
                player.setFlipY(false);
            } else if (cursors.up.isDown) {
                player.setVelocityY(-speed);
                player.setAngle(-90);
            } else if (cursors.down.isDown) {
                player.setVelocityY(speed);
                player.setAngle(90);
            }
        }
    </script>
</body>
</html>
