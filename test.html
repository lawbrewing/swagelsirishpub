<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #222; display: flex; justify-content: center; align-items: center; height: 100vh; color: white; font-family: sans-serif; }
        canvas { border: 4px solid #d4af37; border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
    </style>
</head>
<body>
    <div id="game-container"></div>

    <script>
        const config = {
            type: Phaser.AUTO,
            width: 640,
            height: 640,
            parent: 'game-container',
            pixelArt: true,
            physics: { default: 'arcade' },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let player;
        let cursors;

        function preload() {
            // Pulling from your GitHub
            const baseUrl = 'https://lawbrewing.github.io/LawBrewing/';
            
            // Slice the 128x128 roads image into four 64x64 tiles
            this.load.spritesheet('roads', baseUrl + 'roads.png', { frameWidth: 64, frameHeight: 64 });
            
            // Load the truck (Reminder: Ensure this is a PNG with transparency on your GitHub!)
            this.load.image('truck', baseUrl + 'green.png');
            
            // Load the destination
            this.load.image('pub', baseUrl + '1000002790.jpg');
        }

        function create() {
            // 1. CREATE A SIMPLE MAP (10x10 tiles)
            // Frame 0=Cross, 1=Straight, 2=T-Junction, 3=Corner (based on your roads.png)
            for (let y = 0; y < 10; y++) {
                for (let x = 0; x < 10; x++) {
                    // Fill with grass/straight roads for now
                    this.add.image(x * 64 + 32, y * 64 + 32, 'roads', 1); 
                }
            }

            // 2. PLACE SWAGEL'S PUB (The Goal)
            this.add.image(576, 576, 'pub').setScale(0.5); // Scaled down to fit tile

            // 3. PLACE THE PLAYER
            player = this.physics.add.sprite(96, 96, 'truck');
            player.setCollideWorldBounds(true);
            player.setScale(0.8); // Make truck fit within the lane

            // 4. SETUP CONTROLS
            cursors = this.input.keyboard.createCursorKeys();
            
            this.add.text(20, 20, 'Law Brewing: Prohibition Run (Phase 1)', { 
                fontSize: '20px', fill: '#d4af37', backgroundColor: '#000' 
            });
        }

        function update() {
            // Movement Logic
            player.setVelocity(0);

            if (cursors.left.isDown) {
                player.setVelocityX(-160);
                player.setAngle(-90);
            } else if (cursors.right.isDown) {
                player.setVelocityX(160);
                player.setAngle(90);
            }

            if (cursors.up.isDown) {
                player.setVelocityY(-160);
                player.setAngle(0);
            } else if (cursors.down.isDown) {
                player.setVelocityY(160);
                player.setAngle(180);
            }
        }
    </script>
</body>
</html>
