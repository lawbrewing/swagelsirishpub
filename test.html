<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Law Brewing: Diagnostics Mode</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #000; color: white; font-family: monospace; }
        #debug-log { position: absolute; top: 10px; left: 10px; z-index: 100; pointer-events: none; white-space: pre; }
    </style>
</head>
<body>
    <div id="debug-log">Waiting for engine...</div>
    <div id="game-container"></div>

    <script>
        // --- ASSET SETTINGS (ADJUST THESE IF RED TEXT APPEARS) ---
        // Based on your screenshot, these should be .png. 
        // If your GitHub actually has .jpg, change these lines!
        const FILE_PATHS = {
            roads: 'roads.png',       // Is this .jpg on your repo?
            buildings: 'buildings2.png', // Is this .jpg on your repo?
            truck: 'green.png'        // Is this .jpg on your repo?
        };

        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            parent: 'game-container',
            backgroundColor: '#333', // Grey background so you can see if canvas loads
            scene: { preload: preload, create: create }
        };

        const game = new Phaser.Game(config);
        let debugText = document.getElementById('debug-log');
        
        function log(msg) {
            debugText.innerText += '\n' + msg;
            console.log(msg);
        }

        function preload() {
            log("Engine Started.");
            const base = 'https://lawbrewing.github.io/LawBrewing/';
            
            // 1. ALLOW GITHUB REQUESTS
            this.load.crossOrigin = 'anonymous';

            // 2. LOAD HANDLERS
            this.load.on('filecomplete', (key) => log(`✅ Loaded: ${key}`));
            this.load.on('loaderror', (file) => {
                log(`❌ FAILED: ${file.src}`); 
                log(`   -> Check if file is really .png or .jpg!`);
            });

            // 3. LOAD FILES (Trying to load as simple images first to prevent crash)
            log("Attempting to fetch files...");
            this.load.spritesheet('roads', base + FILE_PATHS.roads, { frameWidth: 512, frameHeight: 512 });
            this.load.spritesheet('buildings', base + FILE_PATHS.buildings, { frameWidth: 512, frameHeight: 512 });
            this.load.image('truck', base + FILE_PATHS.truck);
        }

        function create() {
            log("Creating Scene...");
            
            // TEST 1: Draw a Red Box (Proves Phaser is drawing)
            this.add.rectangle(400, 300, 700, 500, 0x1b301b); 
            
            // TEST 2: Draw the Truck
            try {
                const p = this.add.image(400, 300, 'truck');
                p.setDisplaySize(100, 60);
                log("drawn truck.");
            } catch(e) { log("Could not draw truck."); }

            // TEST 3: Draw Road (Top-Right Straight)
            try {
                const r = this.add.image(200, 300, 'roads', 1);
                r.setDisplaySize(128, 128);
                log("drawn road.");
            } catch(e) { log("Could not draw road (sprite slicing failed)."); }

            // TEST 4: Draw Building
            try {
                const b = this.add.image(600, 200, 'buildings', 0);
                b.setDisplaySize(150, 150);
                log("drawn building.");
            } catch(e) { log("Could not draw building."); }
        }
    </script>
</body>
</html>
