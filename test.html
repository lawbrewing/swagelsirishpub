<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Law Brewing: Prohibition Run</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        canvas { border: 4px solid #d4af37; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="game-container"></div>

    <script>
        const config = {
            type: Phaser.AUTO,
            width: 1024,
            height: 768,
            parent: 'game-container',
            backgroundColor: '#1b301b', // Dark Grass Green
            physics: { default: 'arcade', arcade: { debug: false } },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let player;
        let cursors;

        function preload() {
            const baseUrl = 'https://lawbrewing.github.io/LawBrewing/';
            
            // Loading your assets
            this.load.image('road_tile', baseUrl + 'roads.jpg'); 
            this.load.image('truck', baseUrl + 'green.png');
            this.load.image('pub', baseUrl + '1000002790.jpg');
            this.load.image('landmark', baseUrl + 'buildings2.jpg');
            this.load.image('objects', baseUrl + 'objects.jpg');
        }

        function create() {
            // 1. CREATE A SCENE (Not just random blobs)
            // We'll create a "Street" at the bottom
            for (let i = 0; i < 10; i++) {
                // Place road tiles. We scale them so they aren't blurry
                let r = this.add.image(i * 200, 600, 'road_tile');
                r.setDisplaySize(200, 200);
            }

            // 2. PLACE THE DESTINATION (Swagel's Pub)
            // We place it at the end of the road
            let finishLine = this.add.image(1800, 480, 'pub');
            finishLine.setDisplaySize(250, 250);

            // 3. PLACE LANDMARKS (Lambeau / Town Hall)
            // We place these in the "background" to create depth
            let building = this.add.image(500, 250, 'landmark');
            building.setDisplaySize(500, 350);

            // 4. THE PLAYER (The Green Truck)
            player = this.physics.add.sprite(150, 600, 'truck');
            player.setDisplaySize(120, 70);
            player.setCollideWorldBounds(false); // Let it drive off screen for now

            // 5. THE CAMERA (This makes it look like a real game)
            // The camera will follow the truck
            this.cameras.main.startFollow(player, true, 0.05, 0.05);
            this.cameras.main.setZoom(0.8); // Zoom out a bit to see the world
            this.cameras.main.setBounds(0, 0, 2000, 768);

            // 6. UI OVERLAY
            let uiText = this.add.text(20, 20, 'LAW BREWING: PROHIBITION RUN', { 
                fontFamily: 'Georgia, serif', fontSize: '32px', fill: '#d4af37' 
            }).setScrollFactor(0); // Fixes text to the screen, not the world

            cursors = this.input.keyboard.createCursorKeys();
        }

        function update() {
            player.setVelocity(0);
            const speed = 300;

            if (cursors.left.isDown) {
                player.setVelocityX(-speed);
                player.setAngle(180);
                player.setFlipY(true);
            } else if (cursors.right.isDown) {
                player.setVelocityX(speed);
                player.setAngle(0);
                player.setFlipY(false);
            }

            if (cursors.up.isDown) {
                player.setVelocityY(-speed);
                player.setAngle(-90);
            } else if (cursors.down.isDown) {
                player.setVelocityY(speed);
                player.setAngle(90);
            }
        }
    </script>
</body>
</html>
