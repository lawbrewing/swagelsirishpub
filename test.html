<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Law Brewing: Prohibition Run</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #1a1a1a; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        canvas { border: 4px solid #d4af37; box-shadow: 0 0 50px rgba(0,0,0,0.9); }
    </style>
</head>
<body>
    <div id="game-container"></div>

    <script>
        // --- GAME CONFIGURATION ---
        const TILE_SIZE = 128; // Large tiles keep your vector drawings sharp
        const MAP_WIDTH = 10;
        const MAP_HEIGHT = 8;

        // The Map Array: 0 = Grass, 1 = Road, 2 = Swagel's Pub, 3 = Law Factory
        const worldMap = [
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 3, 1, 1, 1, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
            [0, 0, 0, 0, 0, 2, 1, 1, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ];

        const config = {
            type: Phaser.AUTO,
            width: 1024,
            height: 768,
            parent: 'game-container',
            pixelArt: false, // Set to false for smooth vector drawings
            physics: { default: 'arcade' },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let player, cursors;

        function preload() {
            const baseUrl = 'https://lawbrewing.github.io/LawBrewing/';
            
            // Define your assets here. Easy to swap URLs later.
            this.load.image('road', baseUrl + 'roads.jpg');
            this.load.image('truck', baseUrl + 'green.png');
            this.load.image('pub', baseUrl + '1000002790.jpg');
            this.load.image('factory', baseUrl + 'buildings2.jpg');
            this.load.image('grass', baseUrl + 'objects.jpg'); 
        }

        function create() {
            // 1. GENERATE WORLD FROM ARRAY
            for (let row = 0; row < MAP_HEIGHT; row++) {
                for (let col = 0; col < MAP_WIDTH; col++) {
                    let x = col * TILE_SIZE + (TILE_SIZE / 2);
                    let y = row * TILE_SIZE + (TILE_SIZE / 2);
                    let tileType = worldMap[row][col];

                    // Draw Background Grass First
                    this.add.image(x, y, 'grass').setDisplaySize(TILE_SIZE, TILE_SIZE).setAlpha(0.3);

                    if (tileType === 1) { // Road
                        this.add.image(x, y, 'road').setDisplaySize(TILE_SIZE, TILE_SIZE);
                    } else if (tileType === 2) { // Swagel's Pub
                        this.add.image(x, y, 'pub').setDisplaySize(TILE_SIZE, TILE_SIZE);
                    } else if (tileType === 3) { // Law Factory
                        this.add.image(x, y, 'factory').setDisplaySize(TILE_SIZE, TILE_SIZE);
                    }
                }
            }

            // 2. INITIALIZE PLAYER
            player = this.physics.add.sprite(192, 192, 'truck');
            player.setDisplaySize(80, 50);
            player.setCollideWorldBounds(true);

            // 3. UI OVERLAY
            this.add.text(20, 20, 'LAW BREWING: PROHIBITION RUN', { 
                fontFamily: 'Georgia, serif', fontSize: '28px', fill: '#d4af37' 
            }).setScrollFactor(0);

            cursors = this.input.keyboard.createCursorKeys();
        }

        function update() {
            player.setVelocity(0);
            const speed = 250;

            if (cursors.left.isDown) {
                player.setVelocityX(-speed);
                player.setAngle(-180);
                player.setFlipY(true);
            } else if (cursors.right.isDown) {
                player.setVelocityX(speed);
                player.setAngle(0);
                player.setFlipY(false);
            } else if (cursors.up.isDown) {
                player.setVelocityY(-speed);
                player.setAngle(-90);
            } else if (cursors.down.isDown) {
                player.setVelocityY(speed);
                player.setAngle(90);
            }
        }
    </script>
</body>
</html>
