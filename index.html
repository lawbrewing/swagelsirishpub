<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swagel's Irish Pub & Rumble</title>
    <style>
        /* --- GLOBAL VARIABLES (Packers / Irish Theme) --- */
        :root {
            --packer-green: #203731;  /* The official Dark Green */
            --packer-gold: #ffb612;   /* The official Athletic Gold */
            --cream-text: #fdfbf7;
            /* The Glowing Effect for the Logo & Text */
            --gold-glow-filter: drop-shadow(0 0 15px rgba(255, 182, 18, 0.8));
            --gold-text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 10px rgba(255, 182, 18, 0.5);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Georgia', serif;
            background-color: var(--packer-green);
            background-image: linear-gradient(to bottom, #203731, #0e1a17);
            color: var(--cream-text);
            line-height: 1.6;
        }

        /* --- THE HEADER (Bigger Logo, Left Aligned) --- */
        .main-header {
            position: relative;
            width: 100%;
            background-color: white;
            display: flex;
            justify-content: flex-start; /* Align left */
            align-items: center;
            padding: 20px 40px;
            border-bottom: 8px solid var(--packer-gold);
            box-shadow: 0 0 40px rgba(0,0,0,0.6);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .logo-img {
            max-height: 150px; /* Bigger logo */
            width: auto;
            display: block;
            filter: var(--gold-glow-filter);
        }
        
        .header-title {
            font-size: 3rem;
            color: var(--packer-gold);
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: var(--gold-text-shadow);
            /* Ensure text doesn't wrap awkwardly on smaller screens */
            white-space: nowrap; 
        }

        /* --- NAVIGATION / CTA BAR --- */
        .cta-bar {
            text-align: center;
            margin: 50px 0 30px 0;
        }

        .law-link {
            background-color: #000;
            color: var(--packer-gold);
            border: 3px solid var(--packer-gold);
            font-family: 'Verdana', sans-serif;
            font-weight: bold;
            font-size: 1.3rem;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s ease;
            text-decoration: none;
            box-shadow: 0 0 20px rgba(255, 182, 18, 0.3);
            display: inline-block;
        }

        .law-link:hover {
            background-color: var(--packer-gold);
            color: #000;
            box-shadow: 0 0 30px var(--packer-gold);
        }

        /* --- MAIN CONTAINER --- */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px 50px 20px;
        }

        /* --- RUMBLE SECTION STYLING --- */
        .rumble-section {
            background-color: rgba(0, 0, 0, 0.5);
            border: 4px solid var(--packer-gold);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin-top: 30px;
        }

        .section-title {
            font-size: 2.5rem;
            color: var(--packer-gold);
            margin-bottom: 30px;
            text-transform: uppercase;
            text-shadow: 2px 2px 0 #000;
        }

        #display-box {
            font-size: 140px;
            font-family: 'Impact', sans-serif;
            color: var(--packer-gold);
            background: #000;
            border: 8px solid var(--packer-gold);
            width: 220px;
            height: 220px;
            line-height: 200px; /* Center vertically */
            margin: 20px auto;
            border-radius: 50%;
            box-shadow: 0 0 40px rgba(255, 182, 18, 0.5);
        }

        input[type="text"] {
            font-size: 24px;
            padding: 15px;
            width: 80%;
            max-width: 500px;
            margin-bottom: 20px;
            border: 3px solid var(--packer-gold);
            background: #fff;
            color: #000;
            text-transform: uppercase;
            text-align: center;
            font-weight: bold;
        }

        .draw-btn {
            background: var(--packer-gold);
            color: var(--packer-green);
            font-size: 28px;
            font-weight: bold;
            padding: 15px 50px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-transform: uppercase;
            transition: transform 0.1s, background 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .draw-btn:hover { background-color: #ffca4f; transform: scale(1.02); }
        .draw-btn:active { transform: scale(0.98); }
        .draw-btn:disabled { background: #555; color: #888; cursor: not-allowed; }

        #log-container {
            margin-top: 40px;
            text-align: left;
            border-top: 2px solid var(--packer-gold);
            padding-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .entry-row {
            background: rgba(0,0,0,0.7);
            margin: 5px 0;
            padding: 15px;
            border-left: 6px solid var(--packer-gold);
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-family: sans-serif;
        }

        .entry-number { font-weight: bold; color: var(--packer-gold); font-size: 24px; }
        
        .reset-btn {
            margin-top: 40px;
            background: #8b0000; /* Deep Red for danger */
            color: white;
            border: 2px solid #ff0000;
            font-size: 14px;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
        }

        /* --- MOBILE OPTIMIZATION --- */
        @media (max-width: 768px) {
            .main-header { flex-direction: column; padding: 20px; }
            .logo-container { flex-direction: column; gap: 10px; text-align: center; }
            .logo-img { max-height: 100px; }
            .header-title { font-size: 2.2rem; white-space: normal; }
            .rumble-section { padding: 20px; }
            #display-box { width: 180px; height: 180px; line-height: 160px; font-size: 100px; }
            input[type="text"] { width: 100%; }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="logo-container">
            <img src="https://lawbrewing.github.io/swagelsirishpub/sip.png" alt="Swagel's Irish Pub Logo" class="logo-img">
            <h1 class="header-title">Swagel's Irish Pub</h1>
        </div>
    </header>

    <div class="container">

        <div class="cta-bar">
            <a href="https://lawbrewing.github.io/LawBrewing/index.html" class="law-link">üç∫ See Law Brewing Live Taps</a>
        </div>

        <section class="rumble-section">
            <h2 class="section-title">Royal Rumble Draw</h2>
            
            <div id="display-box">?</div>
            <div id="status" style="margin-bottom: 15px; color: var(--packer-gold); font-weight:bold;">Loading...</div>

            <input type="text" id="participantName" placeholder="ENTER NAME HERE" onkeypress="handleEnter(event)">
            <br>
            <button id="drawBtn" class="draw-btn" onclick="drawEntry()">DRAW ENTRY #</button>

            <div id="log-container">
                </div>

            <button class="reset-btn" onclick="resetPool()">‚ö† ADMIN: RESET DRAW</button>
        </section>

    </div>

    <script>
        // 1. Setup State (Check local storage so refreshes don't lose data)
        let pool = JSON.parse(localStorage.getItem('rumblePool')) || Array.from({length: 30}, (_, i) => i + 1);
        let history = JSON.parse(localStorage.getItem('rumbleHistory')) || [];

        function updateUI() {
            // Update remaining count
            document.getElementById('status').innerText = `${pool.length} NUMBERS REMAINING`;
            
            // Update History Log (reversed so newest is top)
            const logDiv = document.getElementById('log-container');
            logDiv.innerHTML = '';
            history.slice().reverse().forEach(item => {
                const row = document.createElement('div');
                row.className = 'entry-row';
                row.innerHTML = `<span>${item.name}</span> <span class="entry-number">#${item.number}</span>`;
                logDiv.appendChild(row);
            });

            // If pool is empty, disable input
            if(pool.length === 0) {
                 document.getElementById('participantName').disabled = true;
                 document.getElementById('participantName').placeholder = "DRAW COMPLETE";
                 document.getElementById('drawBtn').disabled = true;
            }
        }

        function handleEnter(e) {
            if (e.key === 'Enter') drawEntry();
        }

        function drawEntry() {
            const input = document.getElementById('participantName');
            const name = input.value.trim().toUpperCase();
            const btn = document.getElementById('drawBtn');
            const display = document.getElementById('display-box');

            if (!name) return alert("Please enter a name first!");
            if (pool.length === 0) return alert("All numbers have been drawn!");

            // Lock UI during draw
            btn.disabled = true;
            input.disabled = true;

            // Pick the winner internally
            const randomIndex = Math.floor(Math.random() * pool.length);
            const drawnNumber = pool[randomIndex];

            // Animation Loop
            let count = 0;
            let speed = 50;
            
            const interval = setInterval(() => {
                // Show random number between 1-30 during shuffle
                display.innerText = Math.floor(Math.random() * 30) + 1;
                // Flicker effect
                display.style.color = count % 2 === 0 ? '#fff' : 'var(--packer-gold)';
                count++;
                
                // Stop animation after 25 frames
                if (count > 25) {
                    clearInterval(interval);
                    finalizeDraw(name, drawnNumber, randomIndex);
                    // Unlock UI
                    btn.disabled = false;
                    input.disabled = false;
                    input.value = '';
                    input.focus();
                }
            }, speed);
        }

        function finalizeDraw(name, number, index) {
            // 1. Remove number from available pool
            pool.splice(index, 1);
            
            // 2. Add to history
            history.push({ name: name, number: number });
            
            // 3. Show final result in big box
            const display = document.getElementById('display-box');
            display.innerText = number;
            display.style.color = 'var(--packer-gold)';
            // Flash green border on success
            display.style.borderColor = '#39ff14'; 
            setTimeout(() => { display.style.borderColor = 'var(--packer-gold)'; }, 1000);
            
            // 4. Save state to browser
            localStorage.setItem('rumblePool', JSON.stringify(pool));
            localStorage.setItem('rumbleHistory', JSON.stringify(history));

            updateUI();
        }

        function resetPool() {
            if (confirm("WARNING: This will delete all current entries and start over from 30. Are you sure?")) {
                pool = Array.from({length: 30}, (_, i) => i + 1);
                history = [];
                localStorage.removeItem('rumblePool');
                localStorage.removeItem('rumbleHistory');
                document.getElementById('display-box').innerText = "?";
                document.getElementById('participantName').disabled = false;
                document.getElementById('participantName').placeholder = "ENTER NAME HERE";
                document.getElementById('drawBtn').disabled = false;
                updateUI();
            }
        }

        // Initialize page on load
        updateUI();
    </script>

</body>
</html>
